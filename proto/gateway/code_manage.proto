syntax = "proto3";

package code_manage.v1;


enum Language {
  LANGUAGE_UNSPECIFIED = 0;
  JAVASCRIPT = 1;
  PYTHON = 2;
  GO = 3;
}

message TestCase {
    string _id = 1;
    string input = 2;
    string output = 3;
}

service CodeManageService {
    rpc SubmitCodeExec(SubmitCodeExecRequest) returns (SubmitCodeExecResponse);
    rpc RunCodeExec(RunCodeExecRequest) returns (RunCodeExecResponse);
    rpc CustomCodeExec(CustomCodeExecRequest) returns (CustomCodeExecResponse);
}

message SubmitCodeExecRequest{
    string problemId = 1;
    string userId = 2;
    string username = 3;
    optional string country = 4;
    string userCode = 5;
    Language language = 6;
}

message SubmitCodeExecResponse{ 
    string submissionId = 1;
}

message RunCodeExecRequest {
    string problemId = 1;
    Language language = 3;
    string userCode = 4;
    repeated TestCase testCases = 5;
}

message RunCodeExecResponse {
    string tempId = 1;
}

message CustomCodeExecRequest {
    string userCode = 2;
    Language language = 3;
}

message CustomCodeExecResponse{
    string tempId = 1;
}
